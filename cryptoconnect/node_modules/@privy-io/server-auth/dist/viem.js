"use strict";var y=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var f=(e,t)=>{for(var n in t)y(e,n,{get:t[n],enumerable:!0})},E=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of h(t))!x.call(e,s)&&s!==n&&y(e,s,{get:()=>t[s],enumerable:!(r=T(t,s))||r.enumerable});return e};var I=e=>E(y({},"__esModule",{value:!0}),e);var P={};f(P,{createViemAccount:()=>w});module.exports=I(P);var d=require("viem/accounts");var c=class extends Error{constructor(n,r){super(n);r instanceof Error&&(this.cause=r)}toString(){return`${this.type}: ${this.message}`}};var a=class extends c{constructor(n,r){super(n,r);this.type="client_error"}};var w=async e=>{let{walletId:t,address:n,privy:r}=e;return(0,d.toAccount)({address:n,signMessage:async({message:o})=>{let i=S(o),{signature:p}=await r.walletApi.ethereum.signMessage({walletId:t,message:i});return p},signTypedData:async o=>{let{message:i,domain:p,types:m,primaryType:g}=o;if(!p)throw new a("typedData.domain must be defined");if(!i)throw new a("typedData.message must be defined");if(!m)throw new a("typedData.message must be defined");let{signature:l}=await r.walletApi.ethereum.signTypedData({walletId:t,typedData:{domain:p,message:i,primaryType:g,types:m}});return l},signTransaction:async o=>{let i=A(o),{signedTransaction:p}=await r.walletApi.ethereum.signTransaction({walletId:t,transaction:i});return p}})},R=e=>{if(e==="legacy")return 0;if(e==="eip2930")return 1;if(e=="eip1559"||typeof e>"u")return 2;throw new a("EIP4844 and EIP7702 transaction types are not yet supported.")},u=e=>{if(e)return`0x${e.toString(16)}`},S=e=>typeof e=="string"?e:typeof e.raw=="string"?Uint8Array.from(Buffer.from(e.raw.slice(2),"hex")):e.raw,A=e=>({to:e.to??void 0,nonce:e.nonce,chainId:e.chainId,data:e.data,value:u(e.value),type:R(e.type),gasLimit:u(e.gas),gasPrice:u(e.gasPrice),maxFeePerGas:u(e.maxFeePerGas),maxPriorityFeePerGas:u(e.maxPriorityFeePerGas)});0&&(module.exports={createViemAccount});
